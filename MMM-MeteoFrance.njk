<div class="wrapper">

  {% if loading or error %}
      <div class="current-conditions-wrapper">
        <span class="current-conditions-wrapper">
          {% if error %}
            <img class="current icon" src="modules/MMM-MeteoFrance/resources/p33j.svg" />
            <div class="dimmed light small" style="margin-right: 20px">{{ phrases.error | safe }}</div>
          {% else %}
            <div class="loadingDisplayer">
              <div class="loadingDisplayerLogo"><img class="loadingLogo" src="modules/MMM-MeteoFrance/resources/logo.png"></img></div>
              <div class="loadingDisplayerVideo">
                <video autoplay muted loop class="loadingVideo" src="modules/MMM-MeteoFrance/resources/splash_video.mp4"></video>
                <span class="dimmed light small">{{ phrases.loading | safe }}</span>
              </div>
            </div>
          {% endif %}
        </span>
      </div>

  {% else %}

    {# -------------- Current Conditions -------------- #}
    {% if config.display.CurrentConditions %}
        <div class="background {{ forecast.currently.background }}"></div>
        <span class="current-conditions-wrapper">
          <img class="current icon" src="{{ forecast.currently.iconPath }}" />
          <span class="current temperature bright large light">{{ forecast.currently.temperature }}</span>
        </span>

    {% endif %}

    {# -------------- Extra Current Conditions -------------- #}
    {% if config.display.ExtraCurrentConditions %}
      <div class="extra-current-conditions-wrapper small bright">
        <div class="feels-sun-container">
        {% if config.display.Feels %}
          <span class="feels-temperature">{{ forecast.currently.feels }}</span>
        {% endif %}
        {% if config.display.SunCondition %}
          <span class="wi {{ forecast.currently.sun.icon }}"></span>
          <span class="sun-time">  {{ forecast.currently.sun.time }}</span>
        {% endif %}
        {% if config.display.Humidity %}
          <span class="wi wi-humidity"></span>
          <span class="humidity">  {{ forecast.currently.humidity }}</span>
        {% endif %}
        </div>
        <span class="temperature-uv-container">
          <span class="temp-container">
            <span class="wi wi-thermometer"></span>
            <span class="low-temperature">{{ forecast.currently.tempRange.low }}</span>
            <span class="temperature-separator">/</span>
            <span class="high-temperature">{{ forecast.currently.tempRange.high }}</span>
          </span>
          {% if config.display.UV %}
          <span class="uv-container">
            <span class="inline-icon icon_uv"></span>
            <span class="uv{{ forecast.currently.uv }}">  {{ forecast.currently.uv }}</span>
          </span>
          {% endif %}
        </span>
        <div class="Precip-wind-contener">
            {% if config.display.Precipitation %}
              <span class="precipitation-container">
                  <span class="wi wi-raindrop"></span>
                {% if forecast.currently.precipitation.accumulation %}
                  <span class="pop">{{ forecast.currently.precipitation.accumulation }}</span>
                {% endif %}
              </span>
            {% endif %}

            {% if config.display.Wind %}
              <span class="wind-container">
                <span class="wi wi-strong-wind"></span>
                <span class="wind-speed">{{ forecast.currently.wind.windSpeed }}</span>
                {% if forecast.currently.wind.windIcon %}
                  <img class="inline-icon {{ forecast.currently.wind.Beaufort }}" src="{{ forecast.currently.wind.windIcon }}" />
                {% endif %}
              </span>
            {% endif %}
        </div>
        {% if config.display.Wind and forecast.currently.wind.windSpeedGust %}
          <div class="wind-alert-container">
            <span class="fa-solid fa-wind"></span>
            <span class="wind-speed-gust">RAFALES {{ forecast.currently.wind.windSpeedGust }}</span>
          </div>
        {% endif %}
      </div>
    {% endif %}

    {# -------------- Summary -------------- #}
    {% if config.display.Summary %}
      <div class="summary-wrapper small">
        <div class="summary">{{ forecast.summary }}</div>
      </div>
    {% endif %}

    {# -------------- Forecast -------------- #}
    {% if config.display.HourlyForecast or config.display.DailyForecast %}
      <div class="forecast-container">

        {% if config.display.ForecastTableColumnHeaderIcons%}
          <div class="header-row">
            <span class="date-time-header">&nbsp;</span>
            <span class="weather-icon-header">&nbsp;</span>
            <span class="temperature-header"><span class="wi wi-thermometer"></span></span>

            {% if config.display.Wind %}
              <span class="wind-header">
                <span class="wi wi-strong-wind"></span>
              </span>
              <span class="wind-arrow-header">&nbsp;</span>
            {% endif %}
          </div>

        {% endif %}

        {# Hourly #}
        {% if config.display.HourlyForecast %}

          {% for h in forecast.hourly %}
            <div class="forecast-item hourly">
              <span class="time">{{ h.time }}</span>
              <span class="forecast-icon-container">
                <img class="forecast-icon" src="{{ h.iconPath }}" />
              </span>
              <span class="temperature small">{{ h.temperature }}</span>


              {% if config.display.Wind %}
                <span class="wind-container">
                  <span class="wind-speed">{{ h.wind.windSpeed }}</span>
                </span>
                <span class="forecast-icon-arrow-container">
                  <img class="inline-icon wind {{ h.wind.Beaufort }}" src="{{ h.wind.windIcon }}" />
                </span>
              {% endif %}

            </div>
          {% endfor %}

        {% endif %}

        {# Daily #}
        {% if config.display.DailyForecast %}

          {% for d in forecast.daily %}
            <div class="forecast-item hourly">
              <span class="day-name">{{ d.day }}</span>
              <span class="forecast-icon-container">
                <img class="forecast-icon" src="{{ d.iconPath }}" />
              </span>
              <span class="temperature-container small">
                <span class="low-temperature">{{ d.tempRange.low }}</span>
                <span class="temperature-separator">/</span>
                <span class="high-temperature">{{ d.tempRange.high }}</span>
              </span>

              {% if config.display.Wind %}
                <span class="wind-container">
                  <span class="wind-speed">{{ d.wind.windSpeed }}</span>
                </span>
                <span class="forecast-icon-arrow-container">
                  <img class="inline-icon {{ d.wind.Beaufort }}" src="{{ d.wind.windIcon }}" />
                </span>

              {% endif %}

            </div>
          {% endfor %}

        {% endif %}

      </div>
    {% endif %}

    <div class="attribution small dimmed">Mise à jour depuis Météo France, le {{ update }}</div>
  {% endif %}

</div>
